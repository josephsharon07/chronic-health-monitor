(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{23274:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,AuthProvider:()=>d});var n=s(95155),a=s(12115),l=s(35695),r=s(33168);let i=(0,a.createContext)({user:null,session:null,loading:!0,userRole:null,signOut:async()=>{}}),o=()=>(0,a.useContext)(i);function d(e){let{children:t}=e,[s,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(!0),[h,x]=(0,a.useState)(null),f=(0,l.useRouter)();(0,a.useEffect)(()=>{(async()=>{var e,t;let{data:{session:s}}=await r.ND.auth.getSession();c(s),o(null!=(e=null==s?void 0:s.user)?e:null),(null==s?void 0:s.user)&&x((null==(t=s.user.user_metadata)?void 0:t.role)||null),m(!1)})();let{data:{subscription:e}}=r.ND.auth.onAuthStateChange(async(e,t)=>{var s,n;c(t),o(null!=(s=null==t?void 0:t.user)?s:null),(null==t?void 0:t.user)?x((null==(n=t.user.user_metadata)?void 0:n.role)||null):x(null),m(!1)});return()=>{e.unsubscribe()}},[f]);let b=async()=>{await r.ND.auth.signOut(),f.push("/")};return(0,n.jsx)(i.Provider,{value:{user:s,session:d,loading:u,userRole:h,signOut:b},children:t})}},33168:(e,t,s)=>{"use strict";s.d(t,{ND:()=>n,Od:()=>l,Wn:()=>a});let n=(0,s(10851).UU)("https://vitlxeoacmleuokomykj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZpdGx4ZW9hY21sZXVva29teWtqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyMzk4OTMsImV4cCI6MjA2MjgxNTg5M30.JdxEI3ouXLWIZQzV3jAakzDdYaRF63W1yIHM2W5Ph6o");async function a(){let{data:e,error:t}=await n.from("latest_sensor_data").select("*");return t?(console.error("Error fetching latest sensor data:",t),[]):e}async function l(e,t){let{data:s,error:a}=await n.from("sensor_readings").select("*").gte("timestamp",e.toISOString()).lte("timestamp",t.toISOString()).order("timestamp",{ascending:!0});return a?(console.error("Error fetching sensor data by time range:",a),[]):s}},65867:(e,t,s)=>{Promise.resolve().then(s.bind(s,82329))},82329:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var n=s(95155),a=s(12115),l=s(35695),r=s(23274),i=s(33168);function o(){let[e,t]=(0,a.useState)(!1),[s,l]=(0,a.useState)(""),[r,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),h=async e=>{if(e.preventDefault(),t(!0),m(null),d){let{error:e}=await i.ND.auth.signUp({email:s,password:r,options:{data:{role:"patient"}}});e?m(e.message):m("Check your email for the confirmation link.")}else{let{error:e}=await i.ND.auth.signInWithPassword({email:s,password:r});e&&m(e.message)}t(!1)},x=async e=>{e.preventDefault(),t(!0),m(null);let{error:n}=await i.ND.auth.signInWithOtp({email:s,options:{emailRedirectTo:window.location.origin}});n?m(n.message):m("Check your email for the magic link."),t(!1)};return(0,n.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,n.jsxs)("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-8",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:d?"Create an Account":"Sign In"}),u&&(0,n.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),(0,n.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Email Address"}),(0,n.jsx)("input",{type:"email",value:s,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Password"}),(0,n.jsx)("input",{type:"password",value:r,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:d})]}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",disabled:e,children:e?"Loading...":d?"Sign Up":"Sign In"})]}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("button",{onClick:x,className:"w-full bg-gray-100 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",disabled:e||!s,children:"Sign in with Magic Link"})}),(0,n.jsx)("div",{className:"mt-6 text-center",children:(0,n.jsx)("button",{type:"button",onClick:()=>c(!d),className:"text-blue-600 hover:text-blue-800 text-sm",children:d?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]})})}var d=s(91573);function c(){let{user:e}=(0,r.A)(),t=(0,l.useRouter)();return(0,a.useEffect)(()=>{e&&t.push("/dashboard")},[e,t]),(0,n.jsxs)("main",{children:[(0,n.jsx)(d.A,{}),(0,n.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,n.jsx)(o,{})})]})}},91573:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var n=s(95155),a=s(12115),l=s(6874),r=s.n(l),i=s(35695),o=s(23274);function d(){let{user:e,userRole:t,signOut:s}=(0,o.A)(),l=(0,i.usePathname)(),[d,c]=(0,a.useState)(!1),u=[{name:"Dashboard",href:"/dashboard",roles:["patient"]},{name:"Respiratory",href:"/dashboard/respiratory",roles:["patient"]},{name:"Cardiovascular",href:"/dashboard/cardiovascular",roles:["patient"]},{name:"Hypertension",href:"/dashboard/hypertension",roles:["patient"]},{name:"Records",href:"/dashboard/records",roles:["patient"]},{name:"Reports",href:"/dashboard/reports",roles:["patient"]}].filter(e=>!e.roles||t&&e.roles.includes(t));return(0,n.jsxs)("nav",{className:"bg-gradient-to-r from-blue-600 to-blue-800 shadow-lg",children:[(0,n.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsxs)(r(),{href:"/",className:"text-white text-xl font-bold flex items-center",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.8,stroke:"currentColor",className:"w-7 h-7 mr-2",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),"Health Monitor"]})}),(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)("div",{className:"ml-10 flex items-baseline space-x-2",children:u.map(e=>(0,n.jsx)(r(),{href:e.href,className:"".concat(l===e.href?"bg-white text-blue-700 shadow-md":"text-white hover:bg-blue-700 hover:text-white"," px-3 py-2 rounded-md text-sm font-medium transition-all duration-200"),children:e.name},e.name))})})]}),(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)("div",{className:"ml-4 flex items-center md:ml-6",children:e?(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"bg-blue-900 text-white px-3 py-1.5 rounded-full text-sm",children:[e.email," ",(0,n.jsxs)("span",{className:"font-bold",children:["(",t,")"]})]}),(0,n.jsx)("button",{onClick:s,className:"text-white hover:bg-blue-700 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",children:"Sign Out"})]}):(0,n.jsx)(r(),{href:"/login",className:"text-white hover:bg-blue-700 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",children:"Sign In"})})}),(0,n.jsx)("div",{className:"-mr-2 flex md:hidden",children:(0,n.jsxs)("button",{onClick:()=>c(!d),type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-blue-800 transition-all duration-200","aria-controls":"mobile-menu","aria-expanded":"false",children:[(0,n.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,n.jsx)("svg",{className:"".concat(d?"hidden":"block"," h-6 w-6"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),(0,n.jsx)("svg",{className:"".concat(d?"block":"hidden"," h-6 w-6"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})})]})}),(0,n.jsxs)("div",{className:"".concat(d?"block":"hidden"," md:hidden"),id:"mobile-menu",children:[(0,n.jsx)("div",{className:"space-y-1 px-2 pb-3 pt-2 sm:px-3",children:u.map(e=>(0,n.jsx)(r(),{href:e.href,className:"".concat(l===e.href?"bg-white text-blue-700":"text-white hover:bg-blue-700 hover:text-white"," block px-3 py-2 rounded-md text-base font-medium transition-all duration-200"),onClick:()=>c(!1),children:e.name},e.name))}),(0,n.jsx)("div",{className:"border-t border-blue-700 pt-4 pb-3",children:(0,n.jsx)("div",{className:"flex items-center px-5",children:e?(0,n.jsxs)("div",{className:"w-full flex flex-col space-y-2",children:[(0,n.jsxs)("div",{className:"text-white text-sm bg-blue-900 px-3 py-1.5 rounded-full",children:[e.email," ",(0,n.jsxs)("span",{className:"font-bold",children:["(",t,")"]})]}),(0,n.jsx)("button",{onClick:()=>{s(),c(!1)},className:"text-white hover:bg-blue-700 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200",children:"Sign Out"})]}):(0,n.jsx)(r(),{href:"/login",className:"text-white hover:bg-blue-700 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200",onClick:()=>c(!1),children:"Sign In"})})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[851,244,441,684,358],()=>t(65867)),_N_E=e.O()}]);