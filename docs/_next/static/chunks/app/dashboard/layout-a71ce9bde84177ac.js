(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{23274:(e,s,t)=>{"use strict";t.d(s,{A:()=>o,AuthProvider:()=>d});var r=t(95155),n=t(12115),l=t(35695),a=t(33168);let i=(0,n.createContext)({user:null,session:null,loading:!0,userRole:null,signOut:async()=>{}}),o=()=>(0,n.useContext)(i);function d(e){let{children:s}=e,[t,o]=(0,n.useState)(null),[d,c]=(0,n.useState)(null),[u,h]=(0,n.useState)(!0),[m,x]=(0,n.useState)(null),b=(0,l.useRouter)();(0,n.useEffect)(()=>{(async()=>{var e,s;let{data:{session:t}}=await a.ND.auth.getSession();c(t),o(null!=(e=null==t?void 0:t.user)?e:null),(null==t?void 0:t.user)&&x((null==(s=t.user.user_metadata)?void 0:s.role)||null),h(!1)})();let{data:{subscription:e}}=a.ND.auth.onAuthStateChange(async(e,s)=>{var t,r;c(s),o(null!=(t=null==s?void 0:s.user)?t:null),(null==s?void 0:s.user)?x((null==(r=s.user.user_metadata)?void 0:r.role)||null):x(null),h(!1)});return()=>{e.unsubscribe()}},[b]);let f=async()=>{await a.ND.auth.signOut(),b.push("/")};return(0,r.jsx)(i.Provider,{value:{user:t,session:d,loading:u,userRole:m,signOut:f},children:s})}},33168:(e,s,t)=>{"use strict";t.d(s,{ND:()=>r,Od:()=>l,Wn:()=>n});let r=(0,t(10851).UU)("https://vitlxeoacmleuokomykj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZpdGx4ZW9hY21sZXVva29teWtqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyMzk4OTMsImV4cCI6MjA2MjgxNTg5M30.JdxEI3ouXLWIZQzV3jAakzDdYaRF63W1yIHM2W5Ph6o");async function n(){let{data:e,error:s}=await r.from("latest_sensor_data").select("*");return s?(console.error("Error fetching latest sensor data:",s),[]):e}async function l(e,s){let{data:t,error:n}=await r.from("sensor_readings").select("*").gte("timestamp",e.toISOString()).lte("timestamp",s.toISOString()).order("timestamp",{ascending:!0});return n?(console.error("Error fetching sensor data by time range:",n),[]):t}},33857:(e,s,t)=>{Promise.resolve().then(t.bind(t,67974))},67974:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(95155),n=t(91573),l=t(12115),a=t(35695),i=t(23274);function o(e){let{children:s,requiredRoles:t}=e,{user:n,loading:o,userRole:d}=(0,i.A)(),c=(0,a.useRouter)();return((0,l.useEffect)(()=>{if(!o){if(!n)return void c.push("/login");if(t&&t.length>0&&(!d||!t.includes(d)))return void c.push("/unauthorized")}},[n,o,d,t,c]),o)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):n&&(!t||!(t.length>0)||d&&t.includes(d))?(0,r.jsx)(r.Fragment,{children:s}):null}function d(e){let{children:s}=e;return(0,r.jsx)(o,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(n.A,{}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-2xl shadow-sm mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-blue-800",children:"Health Monitoring Dashboard"}),(0,r.jsx)("p",{className:"text-blue-600 mt-1",children:"Real-time monitoring of critical health data"})]}),(0,r.jsx)("main",{className:"bg-white rounded-2xl shadow-sm p-6",children:s})]}),(0,r.jsx)("footer",{className:"bg-white border-t border-gray-200 mt-8 py-6",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,r.jsx)("div",{className:"text-gray-500 text-sm mb-4 md:mb-0",children:"\xa9 2025 Chronic Health Monitor. All rights reserved."}),(0,r.jsxs)("div",{className:"flex space-x-6",children:[(0,r.jsx)("a",{href:"#",className:"text-gray-500 hover:text-blue-600 transition-colors duration-200",children:"Privacy Policy"}),(0,r.jsx)("a",{href:"#",className:"text-gray-500 hover:text-blue-600 transition-colors duration-200",children:"Terms of Service"}),(0,r.jsx)("a",{href:"#",className:"text-gray-500 hover:text-blue-600 transition-colors duration-200",children:"Contact Support"})]})]})})})]})})}},91573:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var r=t(95155),n=t(12115),l=t(6874),a=t.n(l),i=t(35695),o=t(23274);function d(){let{user:e,userRole:s,signOut:t}=(0,o.A)(),l=(0,i.usePathname)(),[d,c]=(0,n.useState)(!1),u=[{name:"Dashboard",href:"/dashboard",roles:["patient"]},{name:"Respiratory",href:"/dashboard/respiratory",roles:["patient"]},{name:"Cardiovascular",href:"/dashboard/cardiovascular",roles:["patient"]},{name:"Hypertension",href:"/dashboard/hypertension",roles:["patient"]},{name:"Records",href:"/dashboard/records",roles:["patient"]},{name:"Reports",href:"/dashboard/reports",roles:["patient"]}].filter(e=>!e.roles||s&&e.roles.includes(s));return(0,r.jsxs)("nav",{className:"bg-gradient-to-r from-blue-600 to-blue-800 shadow-lg",children:[(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsxs)(a(),{href:"/",className:"text-white text-xl font-bold flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.8,stroke:"currentColor",className:"w-7 h-7 mr-2",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),"Health Monitor"]})}),(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsx)("div",{className:"ml-10 flex items-baseline space-x-2",children:u.map(e=>(0,r.jsx)(a(),{href:e.href,className:"".concat(l===e.href?"bg-white text-blue-700 shadow-md":"text-white hover:bg-blue-700 hover:text-white"," px-3 py-2 rounded-md text-sm font-medium transition-all duration-200"),children:e.name},e.name))})})]}),(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsx)("div",{className:"ml-4 flex items-center md:ml-6",children:e?(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"bg-blue-900 text-white px-3 py-1.5 rounded-full text-sm",children:[e.email," ",(0,r.jsxs)("span",{className:"font-bold",children:["(",s,")"]})]}),(0,r.jsx)("button",{onClick:t,className:"text-white hover:bg-blue-700 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",children:"Sign Out"})]}):(0,r.jsx)(a(),{href:"/login",className:"text-white hover:bg-blue-700 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",children:"Sign In"})})}),(0,r.jsx)("div",{className:"-mr-2 flex md:hidden",children:(0,r.jsxs)("button",{onClick:()=>c(!d),type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-blue-800 transition-all duration-200","aria-controls":"mobile-menu","aria-expanded":"false",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,r.jsx)("svg",{className:"".concat(d?"hidden":"block"," h-6 w-6"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),(0,r.jsx)("svg",{className:"".concat(d?"block":"hidden"," h-6 w-6"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})})]})}),(0,r.jsxs)("div",{className:"".concat(d?"block":"hidden"," md:hidden"),id:"mobile-menu",children:[(0,r.jsx)("div",{className:"space-y-1 px-2 pb-3 pt-2 sm:px-3",children:u.map(e=>(0,r.jsx)(a(),{href:e.href,className:"".concat(l===e.href?"bg-white text-blue-700":"text-white hover:bg-blue-700 hover:text-white"," block px-3 py-2 rounded-md text-base font-medium transition-all duration-200"),onClick:()=>c(!1),children:e.name},e.name))}),(0,r.jsx)("div",{className:"border-t border-blue-700 pt-4 pb-3",children:(0,r.jsx)("div",{className:"flex items-center px-5",children:e?(0,r.jsxs)("div",{className:"w-full flex flex-col space-y-2",children:[(0,r.jsxs)("div",{className:"text-white text-sm bg-blue-900 px-3 py-1.5 rounded-full",children:[e.email," ",(0,r.jsxs)("span",{className:"font-bold",children:["(",s,")"]})]}),(0,r.jsx)("button",{onClick:()=>{t(),c(!1)},className:"text-white hover:bg-blue-700 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200",children:"Sign Out"})]}):(0,r.jsx)(a(),{href:"/login",className:"text-white hover:bg-blue-700 block px-3 py-2 rounded-md text-base font-medium transition-all duration-200",onClick:()=>c(!1),children:"Sign In"})})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[851,244,441,684,358],()=>s(33857)),_N_E=e.O()}]);